{"version":3,"sources":["stateMachine.js","views/AskingHelpful.js","Screenshot.js","components/ScreenshotWidget.js","components/CommentTextArea.js","views/RatingDetailView.js","components/FeedbackWidget.js","index.js"],"names":["capitalizeFirst","str","charAt","toUpperCase","slice","feedbackStateForType","feedbackType","toggleActionName","Object","defineProperty","id","initial","states","notSelected","entry","concat","on","target","selected","feedbackTypesState","type","objectSpread","toggleNeedHelp","assign","context","needHelp","toggleUnexpectedBehavior","unexpectedBehavior","toggleDocsIssue","docsIssue","toggleSomethingElse","somethingElse","commentState","placeholder","SET_COMMENT_TEXT","actions","showingText","screenshotState","hidden","TOGGLE_INCLUDE_SCREENSHOT","SET_SCREENSHOT","previewing","TOGGLE_SCREENSHOT_ANNOTATOR","annotating","SAVE_SCREENSHOT_ANNOTATIONS","feedbackWidgetState","includeScreenshot","screenshot","helpful","comment","modal","isOpen","OPEN_MODAL","event","CLOSE_MODAL","hasNoRating","RATE_YES","RATE_YES_BUT","RATE_NO","hasRating","unknown","","cond","positive","negative","types","openModal","toggleIncludeScreenshot","setScreenshot","rateYes","rateYesBut","rateNo","stateMachine","Machine","setCommentText","text","guards","isPositiveRating","includes","isNegativeRating","WidgetContext","React","createContext","useWidgetState","widget","useContext","Error","WidgetProvider","props","_useMachine","useMachine","_useMachine2","slicedToArray","state","send","react_default","a","createElement","Provider","value","children","AskingHelpfulView","_useWidgetState","Layout","Heading","ButtonGroup","RatingButton","onClick","styled","button","_templateObject","div","_templateObject2","h2","_templateObject3","_templateObject4","Screenshot","_ref","image","format","classCallCheck","this","dataUrl","imageEl","_this","Promise","resolve","reject","img","Image","src","onerror","onload","_ref2","arguments","length","undefined","width","height","console","log","canvas","document","ctx","getContext","multiplier","toImage","resizedWidth","resizedHeight","resize","scalingFactor","Math","min","scale","toCanvasElement","drawImage","toDataURL","selector","element","querySelector","domtoimage","toPng","ScreenshotWidget","_state$context","_useState","useState","_useState2","screenshotPreview","setScreenshotPreview","isLoading","useEffect","asyncToGenerator","regenerator_default","mark","_callee","ss","scaled","wrap","_context","prev","next","ofElement","sent","scaleDownToFit","stop","apply","takeScreenshot","ScreenshotWidget_Layout","Prompt","toggle_dist_default","size","onChange","checked","ScreenshotWidget_ScreenshotPreview","ScreenshotWidget_templateObject","ScreenshotWidget_templateObject2","ScreenshotPreview","Container","ScreenshotWidget_templateObject3","uiColors","gray","light1","alt","Fragment","LoadingMessage","react_loader_spinner_default","color","white","span","ScreenshotWidget_templateObject4","CommentTextArea","CommentTextArea_templateObject","RatingDetailView","RatingDetailView_Layout","matches","components_CommentTextArea","e","Footer","href","button_dist_default","variant","Header","RatingDetailView_FeedbackTypeSection","RatingDetailView_templateObject","h3","RatingDetailView_templateObject2","RatingDetailView_templateObject3","FeedbackTypeButtonGrid","RatingDetailView_templateObject4","FeedbackTypeToggleButton","_templateObject5","isSelected","green","light2","base","FeedbackTypeSection","_useWidgetState2","_state$value$hasRatin","customStyles","content","top","left","right","bottom","marginRight","transform","padding","FeedbackWidget","closeModal","FeedbackWidget_Layout","react_modal_lib_default","contentLabel","appElement","getElementById","style","Card","CardHeader","icon_dist_default","glyph","CardBody","FeedbackWidget_templateObject","FeedbackWidget_templateObject2","FeedbackWidget_templateObject3","FeedbackWidget_templateObject4","Feedback","__webpack_require__","d","__webpack_exports__","exports"],"mappings":"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","file":"static/js/main.de721bb0.chunk.js","sourcesContent":["import React from \"react\";\nimport { Machine, assign, send } from \"xstate\";\nimport { useMachine } from \"@xstate/react\";\n\nconst capitalizeFirst = str => str.charAt(0).toUpperCase() + str.slice(1);\n\nconst feedbackStateForType = (feedbackType, toggleActionName) => ({\n  [feedbackType]: {\n    id: feedbackType,\n    initial: \"notSelected\",\n    states: {\n      notSelected: {\n        entry: [`toggle${capitalizeFirst(feedbackType)}`],\n        on: {\n          [toggleActionName]: {\n            target: \"selected\",\n          },\n        },\n      },\n      selected: {\n        entry: [`toggle${capitalizeFirst(feedbackType)}`],\n        on: {\n          [toggleActionName]: {\n            target: \"notSelected\",\n          },\n        },\n      },\n    },\n  },\n});\n\n// prettier-ignore\nconst feedbackTypesState = {\n  id: \"feedbackTypes\",\n  type: \"parallel\",\n  states: {\n    ...feedbackStateForType(\"needHelp\", \"TOGGLE_NEED_HELP\"),\n    ...feedbackStateForType(\"unexpectedBehavior\", \"TOGGLE_UNEXPECTED_BEHAVIOR\"),\n    ...feedbackStateForType(\"docsIssue\", \"TOGGLE_DOCS_ISSUE\"),\n    ...feedbackStateForType(\"somethingElse\", \"TOGGLE_SOMETHING_ELSE\"),\n  },\n};\nconst toggleNeedHelp = assign({\n  type: context => ({\n    ...context.type,\n    needHelp: !context.type.needHelp,\n  }),\n});\nconst toggleUnexpectedBehavior = assign({\n  type: context => ({\n    ...context.type,\n    unexpectedBehavior: !context.type.unexpectedBehavior,\n  }),\n});\nconst toggleDocsIssue = assign({\n  type: context => ({\n    ...context.type,\n    docsIssue: !context.type.docsIssue,\n  }),\n});\nconst toggleSomethingElse = assign({\n  type: context => ({\n    ...context.type,\n    somethingElse: !context.type.somethingElse,\n  }),\n});\n\nconst commentState = {\n  id: \"comment\",\n  initial: \"placeholder\",\n  type: \"compound\",\n  states: {\n    placeholder: {\n      on: {\n        SET_COMMENT_TEXT: {\n          target: \"showingText\",\n          actions: \"setCommentText\",\n        },\n      },\n    },\n    showingText: {\n      on: {\n        SET_COMMENT_TEXT: {\n          actions: \"setCommentText\",\n        },\n      },\n    },\n  },\n};\nconst setCommentText = (context, event) => {\n  context.comment = event.text;\n};\n\nconst screenshotState = {\n  id: \"screenshot\",\n  initial: \"previewing\",\n  type: \"compound\",\n  states: {\n    hidden: {\n      on: {\n        TOGGLE_INCLUDE_SCREENSHOT: {\n          target: \"previewing\",\n          actions: \"toggleIncludeScreenshot\",\n        },\n        SET_SCREENSHOT: {\n          actions: \"setScreenshot\",\n        },\n      },\n    },\n    previewing: {\n      on: {\n        TOGGLE_SCREENSHOT_ANNOTATOR: \"annotating\",\n        TOGGLE_INCLUDE_SCREENSHOT: {\n          target: \"hidden\",\n          actions: \"toggleIncludeScreenshot\",\n        },\n      },\n    },\n    annotating: {\n      on: {\n        TOGGLE_SCREENSHOT_ANNOTATOR: \"previewing\",\n        SAVE_SCREENSHOT_ANNOTATIONS: {\n          target: \"previewing\",\n          // actions: \"saveScreenshotAnnotations\",\n        },\n      },\n    },\n  },\n};\n\nconst positiveRatingState = {\n  id: \"positiveRating\",\n  type: \"parallel\",\n  states: {\n    comment: commentState,\n    screenshot: screenshotState,\n  },\n};\nconst negativeRatingState = {\n  id: \"negativeRating\",\n  type: \"parallel\",\n  states: {\n    types: feedbackTypesState,\n    comment: commentState,\n    screenshot: screenshotState,\n  },\n};\n\nconst feedbackWidgetState = {\n  id: \"feedbackWidget\",\n  initial: \"hasNoRating\",\n  context: {\n    includeScreenshot: true,\n    screenshot: null,\n    helpful: \"\",\n    comment: \"\",\n    modal: { isOpen: true },\n    type: {\n      needHelp: false,\n      unexpectedBehavior: false,\n      docsIssue: false,\n      somethingElse: false,\n    },\n  },\n  on: {\n    OPEN_MODAL: {\n      actions: (context, event) => (context.modal.isOpen = true),\n    },\n    CLOSE_MODAL: {\n      target: \"hasNoRating\",\n      actions: (context, event) => (context.modal.isOpen = false),\n    },\n  },\n  states: {\n    hasNoRating: {\n      on: {\n        RATE_YES: {\n          target: \"hasRating\",\n          actions: \"rateYes\",\n        },\n        RATE_YES_BUT: {\n          target: \"hasRating\",\n          actions: \"rateYesBut\",\n        },\n        RATE_NO: {\n          target: \"hasRating\",\n          actions: \"rateNo\",\n        },\n      },\n    },\n    hasRating: {\n      initial: \"unknown\",\n      states: {\n        unknown: {\n          entry: (context, event) => (context.modal.isOpen = true),\n          on: {\n            \"\": [\n              {\n                target: \"positive\",\n                cond: \"isPositiveRating\",\n              },\n              {\n                target: \"negative\",\n                cond: \"isNegativeRating\",\n              },\n            ],\n          },\n        },\n        positive: positiveRatingState,\n        negative: negativeRatingState,\n      },\n    },\n  },\n};\nconst openModal = assign({ modal: { isOpen: true } });\nconst toggleIncludeScreenshot = assign({\n  includeScreenshot: (context, event) => !context.includeScreenshot,\n});\nconst setScreenshot = assign({\n  screenshot: (context, event) => event.screenshot,\n});\n// Context Updates\nconst rateYes = assign({ helpful: \"yes\" });\nconst rateYesBut = assign({ helpful: \"yesbut\" });\nconst rateNo = assign({ helpful: \"no\" });\n// Guards\nconst isPositiveRating = (context, event) => {\n  const positiveRatings = [\"yes\"];\n  return positiveRatings.includes(context.helpful);\n};\nconst isNegativeRating = (context, event) => {\n  const negativeRatings = [\"yesbut\", \"no\"];\n  return negativeRatings.includes(context.helpful);\n};\nconst stateMachine = Machine(feedbackWidgetState, {\n  actions: {\n    openModal,\n    rateYes,\n    rateYesBut,\n    rateNo,\n    toggleIncludeScreenshot,\n    setScreenshot,\n    setCommentText,\n    toggleNeedHelp,\n    toggleUnexpectedBehavior,\n    toggleDocsIssue,\n    toggleSomethingElse,\n  },\n  guards: {\n    isPositiveRating,\n    isNegativeRating,\n  },\n});\nexport default stateMachine;\n\nconst WidgetContext = React.createContext();\nexport function useWidgetState() {\n  const widget = React.useContext(WidgetContext);\n  if (!widget) {\n    throw new Error(\n      \"You can only call useWidgetState() inside of a WidgetProvider.\",\n    );\n  }\n  return widget;\n}\nexport function WidgetProvider(props) {\n  const [state, send] = useMachine(stateMachine);\n  const widget = { state, send };\n  return (\n    <WidgetContext.Provider value={widget}>\n      {props.children}\n    </WidgetContext.Provider>\n  );\n}\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { useWidgetState } from \"./../stateMachine\";\n\nexport default function AskingHelpfulView(props) {\n  const { state, send } = useWidgetState();\n  return (\n    <Layout>\n      <Heading>Was this page helpful?</Heading>\n      <ButtonGroup>\n        <RatingButton onClick={() => send(\"RATE_YES\")}>YES</RatingButton>\n        <RatingButton onClick={() => send(\"RATE_YES_BUT\")}>\n          YES, BUT\n        </RatingButton>\n        <RatingButton onClick={() => send(\"RATE_NO\")}>NO</RatingButton>\n      </ButtonGroup>\n    </Layout>\n  );\n}\nconst RatingButton = styled.button`\n  background-image: none;\n  text-align: center;\n  padding: 6px;\n  border-radius: 4px;\n`;\nconst Layout = styled.div`\n  width: 360px;\n  display: flex;\n  flex-direction: column;\n  background: white;\n  padding: 12px;\n`;\nconst Heading = styled.h2`\n  width: 100%;\n  font-weight: lighter;\n  text-align: center;\n  margin: 0;\n`;\nconst ButtonGroup = styled.div`\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: 1em;\n\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-gap: 1em;\n`;\n","import domtoimage from \"dom-to-image\";\n\nexport default class Screenshot {\n  constructor({ image, format }) {\n    this.format = format;\n    this.dataUrl = image;\n    this.imageEl = null;\n  }\n\n  static async ofElement(selector) {\n    // e.g. Screenshot.ofElement(\"#App\")\n    const element = document.querySelector(selector);\n    const image = await domtoimage.toPng(element);\n    return new Screenshot({ image, format: \"png\" });\n  }\n  // Factory Methods\n  toImage() {\n    return new Promise((resolve, reject) => {\n      if (this.imageEl) {\n        resolve(this.imageEl);\n      } else {\n        const img = new Image();\n        img.src = this.dataUrl;\n        img.onerror = reject;\n        img.onload = () => {\n          this.imageEl = img;\n          resolve(img);\n        };\n      }\n    });\n  }\n  toCanvasElement({ width, height } = {}) {\n    console.log(`converting to canvas of size: ${width}x${height}`);\n    var canvas = document.createElement(\"canvas\");\n    var ctx = canvas.getContext(\"2d\");\n    if (width) ctx.canvas.width = width;\n    if (height) ctx.canvas.height = height;\n    return [canvas, ctx];\n  }\n\n  // Modifier Methods\n  async crop() {}\n  async scale(multiplier) {\n    const image = await this.toImage();\n    const resizedWidth = image.width * multiplier;\n    const resizedHeight = image.height * multiplier;\n    return await this.resize({ width: resizedWidth, height: resizedHeight });\n  }\n  async scaleDownToFit({ width, height }) {\n    const image = await this.toImage();\n    width = width || image.width;\n    height = height || image.height;\n    const scalingFactor = Math.min(width / image.width, height / image.height);\n    return this.scale(scalingFactor);\n  }\n  async resize({ width, height }) {\n    const image = await this.toImage();\n    width = width || image.width;\n    height = height || image.height;\n    const [canvas, ctx] = this.toCanvasElement({ width, height });\n    ctx.drawImage(image, 0, 0, width, height);\n    return new Screenshot({\n      image: canvas.toDataURL(\"image/png\"),\n      format: \"png\",\n    });\n  }\n}\n","import React, { useState, useEffect } from \"react\";\nimport { uiColors } from \"@leafygreen-ui/palette\";\nimport styled from \"@emotion/styled\";\nimport Toggle from \"@leafygreen-ui/toggle\";\n// import Checkbox from \"@leafygreen-ui/checkbox\";\nimport Screenshot from \"./../Screenshot\";\n// import CanvasDraw from \"react-canvas-draw\";\nimport Loader from \"react-loader-spinner\";\nimport { useWidgetState } from \"./../stateMachine\";\n\nexport default function ScreenshotWidget(props) {\n  const { state, send } = useWidgetState();\n  const { screenshot, includeScreenshot } = state.context;\n  const [screenshotPreview, setScreenshotPreview] = useState();\n  const isLoading = includeScreenshot && !screenshot;\n  const toggleIncludeScreenshot = () => send(\"TOGGLE_INCLUDE_SCREENSHOT\");\n  useEffect(() => {\n    const takeScreenshot = async () => {\n      const ss = await Screenshot.ofElement(\"#root\");\n      // const resized = await ss.resize({ width: 356, height: 40 });\n      const scaled = await ss.scaleDownToFit({ width: 356, height: 300 });\n      send({ type: \"SET_SCREENSHOT\", screenshot: ss });\n      setScreenshotPreview(scaled);\n    };\n    if (includeScreenshot) {\n      takeScreenshot();\n      return () => {\n        send({ type: \"SET_SCREENSHOT\", screenshot: null });\n        setScreenshotPreview(null);\n      };\n    }\n  }, [includeScreenshot, send]);\n  return (\n    <Layout>\n      <Prompt>\n        <Toggle\n          size=\"small\"\n          onChange={toggleIncludeScreenshot}\n          checked={includeScreenshot}\n        />\n        <span>Include a screenshot of this page</span>\n      </Prompt>\n      <ScreenshotPreview image={screenshotPreview} isLoading={isLoading} />\n    </Layout>\n  );\n}\nconst Layout = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n`;\nconst Prompt = styled.div`\n  display: flex;\n  align-items: center;\n  & span {\n    margin-left: 12px;\n  }\n`;\n\nconst ScreenshotPreview = ({ isLoading, image }) => {\n  const Container = styled.div`\n    margin-block-start: 0.5em;\n    width: 100%;\n    background-color: ${uiColors.gray.light1};\n    background-color: #d4d8d8;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: ${isLoading ? \"300px\" : \"0px\"};\n    border-radius: 4px;\n  `;\n  return (\n    <Container>\n      {image ? (\n        <img alt=\"screenshot\" src={image.dataUrl} />\n      ) : (\n        <>\n          <LoadingMessage>Generating Screenshot</LoadingMessage>\n          <Loader type=\"ThreeDots\" color={uiColors.white} height=\"60\" />\n        </>\n      )}\n    </Container>\n  );\n};\nconst LoadingMessage = styled.span`\n  color: ${uiColors.white};\n  font-size: 16px;\n`;\n","import styled from \"@emotion/styled\";\n\nconst CommentTextArea = styled(\"textarea\")`\n  resize: none;\n  box-sizing: border-box;\n  height: 140px;\n  padding: 14px;\n  min-width: 100%;\n  max-width: 100%;\n  margin-top: 12px;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n  font-size: 16px;\n  line-height: 24px;\n  border-radius: 4px;\n  border-color: rgba(0, 0, 0, 0.5);\n`;\nexport default CommentTextArea;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport ScreenshotWidget from \"./../components/ScreenshotWidget\";\nimport Button from \"@leafygreen-ui/button\";\nimport { uiColors } from \"@leafygreen-ui/palette\";\nimport Icon from \"@leafygreen-ui/icon\";\nimport { useWidgetState } from \"./../stateMachine\";\nimport CommentTextArea from \"./../components/CommentTextArea\";\n\nexport default function RatingDetailView(props) {\n  const { state, send } = useWidgetState();\n  return (\n    <Layout>\n      {state.matches(\"hasRating.positive\") && (\n        <>\n          <CommentTextArea\n            placeholder=\"Tell us more...\"\n            value={state.context.comment}\n            onChange={e =>\n              send({ type: \"SET_COMMENT_TEXT\", text: e.target.value })\n            }\n          />\n          <ScreenshotWidget />\n          <Footer>\n            <span>\n              Need support? Visit our{\" \"}\n              <a href=\"https://support.mongodb.com/welcome\">help center</a>.\n            </span>\n            <Button variant=\"primary\">Submit</Button>\n          </Footer>\n        </>\n      )}\n      {state.matches(\"hasRating.negative\") && (\n        <>\n          <Header>What seems to be the issue?</Header>\n          <FeedbackTypeSection />\n          <Header>Help us improve by telling us more</Header>\n          <CommentTextArea\n            placeholder=\"Please tell us about the issue(s) that you encountered here. Try to include specific details to help us improve our documentation.\"\n            value={state.context.comment}\n            onChange={e =>\n              send({ type: \"SET_COMMENT_TEXT\", text: e.target.value })\n            }\n          />\n          <ScreenshotWidget />\n          <Footer>\n            <span>\n              Need support? Visit our{\" \"}\n              <a href=\"https://support.mongodb.com/welcome\">help center</a>.\n            </span>\n            <Button variant=\"primary\">Submit</Button>\n          </Footer>\n        </>\n      )}\n    </Layout>\n  );\n}\nconst Layout = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n`;\nconst Header = styled.h3`\n  margin-block-start: 0.5em;\n  margin-block-end: 0.35em;\n  font-weight: lighter;\n`;\nconst Footer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\n//\nconst FeedbackTypeButtonGrid = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 12px;\n  margin-top: 12px;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n`;\nconst FeedbackTypeToggleButton = styled.button`\n  border-radius: 4px;\n  padding: 12px;\n  background-image: none;\n  background: ${({ isSelected }) =>\n    isSelected ? uiColors.green.light2 : uiColors.white};\n  box-shadow: ${({ isSelected }) =>\n    isSelected\n      ? `0 0 0 2px ${uiColors.green.base}`\n      : `0 0 0 1px rgba(0, 0, 0, 0.5)`};\n`;\nconst FeedbackTypeSection = props => {\n  const { state, send } = useWidgetState();\n  const {\n    needHelp,\n    unexpectedBehavior,\n    docsIssue,\n    somethingElse,\n  } = state.value.hasRating.negative.types;\n  const isSelected = value => value === \"selected\";\n  return (\n    <FeedbackTypeButtonGrid>\n      <FeedbackTypeToggleButton\n        isSelected={isSelected(needHelp)}\n        onClick={() => send(\"TOGGLE_NEED_HELP\")}\n      >\n        This page wasn't what I expected\n      </FeedbackTypeToggleButton>\n      <FeedbackTypeToggleButton\n        isSelected={isSelected(unexpectedBehavior)}\n        onClick={() => send(\"TOGGLE_UNEXPECTED_BEHAVIOR\")}\n      >\n        I'm having trouble using the product\n      </FeedbackTypeToggleButton>\n      <FeedbackTypeToggleButton\n        isSelected={isSelected(docsIssue)}\n        onClick={() => send(\"TOGGLE_DOCS_ISSUE\")}\n      >\n        This page is wrong or unclear\n      </FeedbackTypeToggleButton>\n      <FeedbackTypeToggleButton\n        isSelected={isSelected(somethingElse)}\n        onClick={() => send(\"TOGGLE_SOMETHING_ELSE\")}\n      >\n        Something else\n      </FeedbackTypeToggleButton>\n    </FeedbackTypeButtonGrid>\n  );\n};\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { AskingHelpfulView, RatingDetailView } from \"./../views\";\nimport Icon from \"@leafygreen-ui/icon\";\nimport { useWidgetState } from \"./../stateMachine\";\nimport Modal from \"react-modal\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    padding: 0,\n  },\n};\n\nexport default function FeedbackWidget() {\n  const { state, send } = useWidgetState();\n  console.log(\"state\", state);\n  const closeModal = () => send(\"CLOSE_MODAL\");\n  return (\n    <Layout>\n      {!state.context.modal.isOpen && <AskingHelpfulView />}\n      <Modal\n        contentLabel=\"Example Modal\"\n        appElement={document.getElementById(\"root\")}\n        isOpen={state.context.modal.isOpen}\n        // onAfterOpen={this.afterOpenModal}\n        // onRequestClose={this.closeModal}\n        style={customStyles}\n      >\n        <Card>\n          <CardHeader>\n            <h2>\n              {state.matches(\"hasRating.positive\") &&\n                \"We're glad to hear that!\"}\n              {state.matches(\"hasRating.negative\") && \"Sorry to hear that.\"}\n            </h2>\n            <Icon\n              glyph=\"X\"\n              size=\"large\"\n              onClick={() => {\n                state.matches(\"hasNoRating\") && closeModal();\n                state.matches(\"hasRating\") && closeModal();\n              }}\n            />\n          </CardHeader>\n          <CardBody>\n            {state.matches(\"hasNoRating\") && <AskingHelpfulView />}\n            {state.matches(\"hasRating\") && <RatingDetailView />}\n          </CardBody>\n        </Card>\n      </Modal>\n    </Layout>\n  );\n}\nconst Layout = styled.div`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  background: lightgrey;\n`;\nconst Card = styled.div`\n  border-radius: 4px;\n  box-shadow: 0 16px 60px 0 rgba(86, 91, 115, 0.2);\n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  background: white;\n  min-width: 420px;\n  font-family: sans-serif;\n`;\nconst CardHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  & h2 {\n    margin: 0 auto 0 0;\n  }\n`;\nconst CardBody = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport FeedbackWidget from \"./components/FeedbackWidget\";\nimport { WidgetProvider } from \"./stateMachine\";\nimport { AskingHelpfulView } from \"./views\";\n\n// import \"./styles.css\";\n\nexports = {\n  AskingHelpfulView\n};\nexport default function Feedback() {\n  return (\n    <WidgetProvider>\n      <FeedbackWidget />\n    </WidgetProvider>\n  );\n}\n\n// const rootElement = document.getElementById(\"root\");\n// ReactDOM.render(<Feedback />, rootElement);\n"],"sourceRoot":""}