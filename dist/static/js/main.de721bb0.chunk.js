(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,n){e.exports=n(86)},86:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=(n(29),n(5)),c=n(6),o=n(16),u=n(18),l=n(17),s=n(2),d=n(31),g=n(39),p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},m=function(e,t){return Object(l.a)({},e,{id:e,initial:"notSelected",states:{notSelected:{entry:["toggle".concat(p(e))],on:Object(l.a)({},t,{target:"selected"})},selected:{entry:["toggle".concat(p(e))],on:Object(l.a)({},t,{target:"notSelected"})}}})},h={id:"feedbackTypes",type:"parallel",states:Object(u.a)({},m("needHelp","TOGGLE_NEED_HELP"),m("unexpectedBehavior","TOGGLE_UNEXPECTED_BEHAVIOR"),m("docsIssue","TOGGLE_DOCS_ISSUE"),m("somethingElse","TOGGLE_SOMETHING_ELSE"))},f=Object(s.b)({type:function(e){return Object(u.a)({},e.type,{needHelp:!e.type.needHelp})}}),E=Object(s.b)({type:function(e){return Object(u.a)({},e.type,{unexpectedBehavior:!e.type.unexpectedBehavior})}}),v=Object(s.b)({type:function(e){return Object(u.a)({},e.type,{docsIssue:!e.type.docsIssue})}}),b=Object(s.b)({type:function(e){return Object(u.a)({},e.type,{somethingElse:!e.type.somethingElse})}}),O={id:"comment",initial:"placeholder",type:"compound",states:{placeholder:{on:{SET_COMMENT_TEXT:{target:"showingText",actions:"setCommentText"}}},showingText:{on:{SET_COMMENT_TEXT:{actions:"setCommentText"}}}}},x={id:"screenshot",initial:"previewing",type:"compound",states:{hidden:{on:{TOGGLE_INCLUDE_SCREENSHOT:{target:"previewing",actions:"toggleIncludeScreenshot"},SET_SCREENSHOT:{actions:"setScreenshot"}}},previewing:{on:{TOGGLE_SCREENSHOT_ANNOTATOR:"annotating",TOGGLE_INCLUDE_SCREENSHOT:{target:"hidden",actions:"toggleIncludeScreenshot"}}},annotating:{on:{TOGGLE_SCREENSHOT_ANNOTATOR:"previewing",SAVE_SCREENSHOT_ANNOTATIONS:{target:"previewing"}}}}},y={id:"feedbackWidget",initial:"hasNoRating",context:{includeScreenshot:!0,screenshot:null,helpful:"",comment:"",modal:{isOpen:!0},type:{needHelp:!1,unexpectedBehavior:!1,docsIssue:!1,somethingElse:!1}},on:{OPEN_MODAL:{actions:function(e,t){return e.modal.isOpen=!0}},CLOSE_MODAL:{target:"hasNoRating",actions:function(e,t){return e.modal.isOpen=!1}}},states:{hasNoRating:{on:{RATE_YES:{target:"hasRating",actions:"rateYes"},RATE_YES_BUT:{target:"hasRating",actions:"rateYesBut"},RATE_NO:{target:"hasRating",actions:"rateNo"}}},hasRating:{initial:"unknown",states:{unknown:{entry:function(e,t){return e.modal.isOpen=!0},on:{"":[{target:"positive",cond:"isPositiveRating"},{target:"negative",cond:"isNegativeRating"}]}},positive:{id:"positiveRating",type:"parallel",states:{comment:O,screenshot:x}},negative:{id:"negativeRating",type:"parallel",states:{types:h,comment:O,screenshot:x}}}}}},w=Object(s.b)({modal:{isOpen:!0}}),T=Object(s.b)({includeScreenshot:function(e,t){return!e.includeScreenshot}}),S=Object(s.b)({screenshot:function(e,t){return t.screenshot}}),j=Object(s.b)({helpful:"yes"}),_=Object(s.b)({helpful:"yesbut"}),C=Object(s.b)({helpful:"no"}),k=Object(d.a)(y,{actions:{openModal:w,rateYes:j,rateYesBut:_,rateNo:C,toggleIncludeScreenshot:T,setScreenshot:S,setCommentText:function(e,t){e.comment=t.text},toggleNeedHelp:f,toggleUnexpectedBehavior:E,toggleDocsIssue:v,toggleSomethingElse:b},guards:{isPositiveRating:function(e,t){return["yes"].includes(e.helpful)},isNegativeRating:function(e,t){return["yesbut","no"].includes(e.helpful)}}}),N=r.a.createContext();function R(){var e=r.a.useContext(N);if(!e)throw new Error("You can only call useWidgetState() inside of a WidgetProvider.");return e}function G(e){var t=Object(g.useMachine)(k),n=Object(o.a)(t,2),a={state:n[0],send:n[1]};return r.a.createElement(N.Provider,{value:a},e.children)}function I(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: 1em;\n\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-gap: 1em;\n"]);return I=function(){return e},e}function L(){var e=Object(i.a)(["\n  width: 100%;\n  font-weight: lighter;\n  text-align: center;\n  margin: 0;\n"]);return L=function(){return e},e}function H(){var e=Object(i.a)(["\n  width: 360px;\n  display: flex;\n  flex-direction: column;\n  background: white;\n  padding: 12px;\n"]);return H=function(){return e},e}function A(){var e=Object(i.a)(["\n  background-image: none;\n  text-align: center;\n  padding: 6px;\n  border-radius: 4px;\n"]);return A=function(){return e},e}function D(e){var t=R(),n=(t.state,t.send);return r.a.createElement(U,null,r.a.createElement(B,null,"Was this page helpful?"),r.a.createElement(P,null,r.a.createElement(M,{onClick:function(){return n("RATE_YES")}},"YES"),r.a.createElement(M,{onClick:function(){return n("RATE_YES_BUT")}},"YES, BUT"),r.a.createElement(M,{onClick:function(){return n("RATE_NO")}},"NO")))}var M=c.a.button(A()),U=c.a.div(H()),B=c.a.h2(L()),P=c.a.div(I()),Y=n(9),z=n.n(Y),X=n(13),V=n(14),W=n(41),F=n.n(W),J=n(42),q=n(43),K=n(44),Q=n.n(K),Z=function(){function e(t){var n=t.image,a=t.format;Object(J.a)(this,e),this.format=a,this.dataUrl=n,this.imageEl=null}return Object(q.a)(e,[{key:"toImage",value:function(){var e=this;return new Promise(function(t,n){if(e.imageEl)t(e.imageEl);else{var a=new Image;a.src=e.dataUrl,a.onerror=n,a.onload=function(){e.imageEl=a,t(a)}}})}},{key:"toCanvasElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;console.log("converting to canvas of size: ".concat(t,"x").concat(n));var a=document.createElement("canvas"),r=a.getContext("2d");return t&&(r.canvas.width=t),n&&(r.canvas.height=n),[a,r]}},{key:"crop",value:function(){var e=Object(X.a)(z.a.mark(function e(){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"scale",value:function(){var e=Object(X.a)(z.a.mark(function e(t){var n,a,r;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toImage();case 2:return n=e.sent,a=n.width*t,r=n.height*t,e.next=7,this.resize({width:a,height:r});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"scaleDownToFit",value:function(){var e=Object(X.a)(z.a.mark(function e(t){var n,a,r,i;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,a=t.height,e.next=3,this.toImage();case 3:return r=e.sent,n=n||r.width,a=a||r.height,i=Math.min(n/r.width,a/r.height),e.abrupt("return",this.scale(i));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"resize",value:function(){var t=Object(X.a)(z.a.mark(function t(n){var a,r,i,c,u,l;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.width,r=n.height,t.next=3,this.toImage();case 3:return i=t.sent,a=a||i.width,r=r||i.height,c=this.toCanvasElement({width:a,height:r}),u=Object(o.a)(c,2),l=u[0],u[1].drawImage(i,0,0,a,r),t.abrupt("return",new e({image:l.toDataURL("image/png"),format:"png"}));case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],[{key:"ofElement",value:function(){var t=Object(X.a)(z.a.mark(function t(n){var a,r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.querySelector(n),t.next=3,Q.a.toPng(a);case 3:return r=t.sent,t.abrupt("return",new e({image:r,format:"png"}));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),e}(),$=n(45),ee=n.n($);function te(){var e=Object(i.a)(["\n  color: ",";\n  font-size: 16px;\n"]);return te=function(){return e},e}function ne(){var e=Object(i.a)(["\n    margin-block-start: 0.5em;\n    width: 100%;\n    background-color: ",";\n    background-color: #d4d8d8;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: ",";\n    border-radius: 4px;\n  "]);return ne=function(){return e},e}function ae(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  & span {\n    margin-left: 12px;\n  }\n"]);return ae=function(){return e},e}function re(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n"]);return re=function(){return e},e}function ie(e){var t=R(),n=t.state,i=t.send,c=n.context,u=c.screenshot,l=c.includeScreenshot,s=Object(a.useState)(),d=Object(o.a)(s,2),g=d[0],p=d[1],m=l&&!u;return Object(a.useEffect)(function(){if(l)return function(){var e=Object(X.a)(z.a.mark(function e(){var t,n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.ofElement("#root");case 2:return t=e.sent,e.next=5,t.scaleDownToFit({width:356,height:300});case 5:n=e.sent,i({type:"SET_SCREENSHOT",screenshot:t}),p(n);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){i({type:"SET_SCREENSHOT",screenshot:null}),p(null)}},[l,i]),r.a.createElement(ce,null,r.a.createElement(oe,null,r.a.createElement(F.a,{size:"small",onChange:function(){return i("TOGGLE_INCLUDE_SCREENSHOT")},checked:l}),r.a.createElement("span",null,"Include a screenshot of this page")),r.a.createElement(ue,{image:g,isLoading:m}))}var ce=c.a.div(re()),oe=c.a.div(ae()),ue=function(e){var t=e.isLoading,n=e.image,a=c.a.div(ne(),V.uiColors.gray.light1,t?"300px":"0px");return r.a.createElement(a,null,n?r.a.createElement("img",{alt:"screenshot",src:n.dataUrl}):r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null,"Generating Screenshot"),r.a.createElement(ee.a,{type:"ThreeDots",color:V.uiColors.white,height:"60"})))},le=c.a.span(te(),V.uiColors.white),se=n(27),de=n.n(se),ge=n(25),pe=n.n(ge);function me(){var e=Object(i.a)(["\n  resize: none;\n  box-sizing: border-box;\n  height: 140px;\n  padding: 14px;\n  min-width: 100%;\n  max-width: 100%;\n  margin-top: 12px;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n  font-size: 16px;\n  line-height: 24px;\n  border-radius: 4px;\n  border-color: rgba(0, 0, 0, 0.5);\n"]);return me=function(){return e},e}var he=Object(c.a)("textarea")(me());function fe(){var e=Object(i.a)(["\n  border-radius: 4px;\n  padding: 12px;\n  background-image: none;\n  background: ",";\n  box-shadow: ",";\n"]);return fe=function(){return e},e}function Ee(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 12px;\n  margin-top: 12px;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n"]);return Ee=function(){return e},e}function ve(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return ve=function(){return e},e}function be(){var e=Object(i.a)(["\n  margin-block-start: 0.5em;\n  margin-block-end: 0.35em;\n  font-weight: lighter;\n"]);return be=function(){return e},e}function Oe(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return Oe=function(){return e},e}function xe(e){var t=R(),n=t.state,a=t.send;return r.a.createElement(ye,null,n.matches("hasRating.positive")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{placeholder:"Tell us more...",value:n.context.comment,onChange:function(e){return a({type:"SET_COMMENT_TEXT",text:e.target.value})}}),r.a.createElement(ie,null),r.a.createElement(Te,null,r.a.createElement("span",null,"Need support? Visit our"," ",r.a.createElement("a",{href:"https://support.mongodb.com/welcome"},"help center"),"."),r.a.createElement(de.a,{variant:"primary"},"Submit"))),n.matches("hasRating.negative")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(we,null,"What seems to be the issue?"),r.a.createElement(_e,null),r.a.createElement(we,null,"Help us improve by telling us more"),r.a.createElement(he,{placeholder:"Please tell us about the issue(s) that you encountered here. Try to include specific details to help us improve our documentation.",value:n.context.comment,onChange:function(e){return a({type:"SET_COMMENT_TEXT",text:e.target.value})}}),r.a.createElement(ie,null),r.a.createElement(Te,null,r.a.createElement("span",null,"Need support? Visit our"," ",r.a.createElement("a",{href:"https://support.mongodb.com/welcome"},"help center"),"."),r.a.createElement(de.a,{variant:"primary"},"Submit"))))}var ye=c.a.div(Oe()),we=c.a.h3(be()),Te=c.a.div(ve()),Se=c.a.div(Ee()),je=c.a.button(fe(),function(e){return e.isSelected?V.uiColors.green.light2:V.uiColors.white},function(e){return e.isSelected?"0 0 0 2px ".concat(V.uiColors.green.base):"0 0 0 1px rgba(0, 0, 0, 0.5)"}),_e=function(e){var t=R(),n=t.state,a=t.send,i=n.value.hasRating.negative.types,c=i.needHelp,o=i.unexpectedBehavior,u=i.docsIssue,l=i.somethingElse,s=function(e){return"selected"===e};return r.a.createElement(Se,null,r.a.createElement(je,{isSelected:s(c),onClick:function(){return a("TOGGLE_NEED_HELP")}},"This page wasn't what I expected"),r.a.createElement(je,{isSelected:s(o),onClick:function(){return a("TOGGLE_UNEXPECTED_BEHAVIOR")}},"I'm having trouble using the product"),r.a.createElement(je,{isSelected:s(u),onClick:function(){return a("TOGGLE_DOCS_ISSUE")}},"This page is wrong or unclear"),r.a.createElement(je,{isSelected:s(l),onClick:function(){return a("TOGGLE_SOMETHING_ELSE")}},"Something else"))},Ce=n(46),ke=n.n(Ce);function Ne(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ne=function(){return e},e}function Re(){var e=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  & h2 {\n    margin: 0 auto 0 0;\n  }\n"]);return Re=function(){return e},e}function Ge(){var e=Object(i.a)(["\n  border-radius: 4px;\n  box-shadow: 0 16px 60px 0 rgba(86, 91, 115, 0.2);\n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  background: white;\n  min-width: 420px;\n  font-family: sans-serif;\n"]);return Ge=function(){return e},e}function Ie(){var e=Object(i.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  background: lightgrey;\n"]);return Ie=function(){return e},e}var Le={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:0}};function He(){var e=R(),t=e.state,n=e.send;console.log("state",t);var a=function(){return n("CLOSE_MODAL")};return r.a.createElement(Ae,null,!t.context.modal.isOpen&&r.a.createElement(D,null),r.a.createElement(ke.a,{contentLabel:"Example Modal",appElement:document.getElementById("root"),isOpen:t.context.modal.isOpen,style:Le},r.a.createElement(De,null,r.a.createElement(Me,null,r.a.createElement("h2",null,t.matches("hasRating.positive")&&"We're glad to hear that!",t.matches("hasRating.negative")&&"Sorry to hear that."),r.a.createElement(pe.a,{glyph:"X",size:"large",onClick:function(){t.matches("hasNoRating")&&a(),t.matches("hasRating")&&a()}})),r.a.createElement(Ue,null,t.matches("hasNoRating")&&r.a.createElement(D,null),t.matches("hasRating")&&r.a.createElement(xe,null)))))}var Ae=c.a.div(Ie()),De=c.a.div(Ge()),Me=c.a.div(Re()),Ue=c.a.div(Ne());function Be(){return r.a.createElement(G,null,r.a.createElement(He,null))}n.d(t,"default",function(){return Be}),exports={AskingHelpfulView:D}}},[[47,1,2]]]);
//# sourceMappingURL=main.de721bb0.chunk.js.map